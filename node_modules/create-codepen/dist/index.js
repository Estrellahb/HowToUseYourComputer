const b=(e,t)=>{if(typeof e.user=="string")return e.user;for(const n of Array.from(t.children)){const r=(n.href||"").match(/codepen\.(io|dev)\/(\w+)\/pen\//i);if(r)return r[2]}return"anon"},x=e=>{const{attributes:t}=e,n={};for(const{name:r,value:s}of Array.from(t))r.startsWith("data-")&&(n[r.replace("data-","")]=s);return"prefill"in n||n["slug-hash"]?(n.user=b(n,e),n):null},p="https://codepen.io",w=e=>{let t="";for(const n in e)n!=="prefill"&&n!=="open"&&(t!==""&&(t+="&"),t+=`${n}=${encodeURIComponent(e[n])}`);return t},a=e=>{const t=e.preview==="true"?"embed/preview":"embed";if("prefill"in e)return[p,t,"prefill"].join("/");let n=e["slug-hash"];if(!n)throw new Error("slug-hash is required");return e.token&&(n+="/"+e.token),[p,e.user??"anon",t,n+"?"+w(e)].join("/").replace(/\/\//g,"//")},v=["html","xml","haml","markdown","slim","pug","application/x-slim"],j=["css","less","scss","sass","stylus","postcss","text/css","text/x-sass","text/x-scss","text/x-less","text/x-styl"],C=["js","javascript","coffeescript","livescript","typescript","babel","text/javascript","text/x-coffeescript","text/x-livescript","text/typescript"],d={vue:"js",flutter:"js"},_=(e="")=>v.includes(e)?"html":j.includes(e)?"css":C.includes(e)?"js":d[e]?d[e]:"unknown",l=(e,t)=>{const n=document.createElement(e);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.setAttribute(r,t[r].toString());return n},O=["title","description","tags","html_classes","head","stylesheets","scripts"],u=e=>{if(Object.hasOwn(e.dataset,"prefill")){const t={},n=JSON.parse(decodeURI(e.dataset.prefill||"{}"));for(const r in n)O.includes(r)&&(t[r]=n[r]);return Array.from(e.querySelectorAll("[data-lang]")).forEach(r=>{const{lang:s,langVersion:i,optionsAutoprefixer:y}=r.dataset;y&&(t.css_prefix="autoprefixer");const o=_(s);t[o]=r.innerText,s!==o&&(t[o+"_pre_processor"]=s),i&&(t[o+"_version"]=i)}),JSON.stringify(t)}},c=e=>{const t=l("form",{class:"code-pen-embed-form",style:"display: none;",method:"post",action:a(e),target:e.name??""});for(const n in e)n!=="prefill"&&t.append(l("input",{type:"hidden",name:n,value:String(e[n])}));return t},m=e=>{const{height:t=300,class:n="",name:r="CodePen Embed"}=e,s={class:`cp_embed_iframe ${n}`,src:a(e),allowfullscreen:"",allowpaymentrequest:"",allowTransparency:"",frameborder:0,width:"100%",height:t,name:r,scrolling:"no",style:"width: 100%; overflow: hidden; display: block;",title:e["pen-title"]??r};return"prefill"in e||(s.loading="lazy"),e["slug-hash"]&&(s.id=`code-pen-embed-${e["slug-hash"].replace("/","_")}`),l("iframe",s)},f=(e,t)=>{if(e.parentNode){const n=document.createElement("div");return n.className="code-pen-embed-wrapper",n.append(t),e.parentNode.replaceChild(n,e),n}return e.append(t),e},S=(e,t)=>{const n=document.createDocumentFragment();let r=null;if(e.open==="true"){if("prefill"in e){const s=u(t);s&&(e.data=s),r=c(e),t.appendChild(r),r.submit()}else window.open(a(e),"_blank");return}if("prefill"in e){const s=u(t);s&&(e.data=s),r=c(e),n.append(r)}n.append(m(e)),f(t,n),r&&r.submit()};let $=1;const h=(e,t)=>{const n=Array.from(document.querySelectorAll(e));for(const r of n){const s={...t,...x(r)};s&&(s.name=`code-pen-embed-${$++}`,S(s,r))}},g=(e=".codepen",t={})=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{h(e,t)}):h(e,t)},k=(e=".codepen")=>g(e,{open:"true"});let A=1;const E=(e,t)=>{const n=typeof t=="string"?document.querySelector(t):t instanceof HTMLElement?t:null;e.user||(e.user="anon"),e.name||(e.name=n?`code-pen-api-${A++}`:"_blank");const r=document.createDocumentFragment();let s=null;"prefill"in e&&(e.data=JSON.stringify(e.prefill??{}),s=c(e),r.append(s)),n?(r.append(m(e)),f(n,r)):document.body.appendChild(r),s&&s.submit()};export{g as loadCodePens,k as openCodePens,E as renderCodePen};
//# sourceMappingURL=index.js.map
